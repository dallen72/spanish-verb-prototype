
<!DOCTYPE html>
<html>
<head>
<style>
  body {
    background-color: lightgray;
  }
  div.gameContainer {
    display: flex;
  }
  div.gameContainer div.table {
    width: fit-content;
  }
  div.gameContainer div.cell {
    cursor: pointer;
    background-color: yellow;
    padding: 1rem;
    margin: 2px;
    flex-basis: 100%;
    text-align: center;
  }
  div.gameContainer div.cell.selected {
    background-color: green;
  }
  div.gameContainer div.cell.correct {
    background-color: lightblue;
  }
  div.gameContainer div.row {
    display: block;
    width: 18rem;
    display: flex;
  }
</style>
  <script>
    let selectedPronoun;
    let selectedConjugation;

    let verbList = [
      {
      name: "Tener",
      conjugations: {yo: "tengo",
        tu: "tienes",
        el: "tiene",
        nosotros: "tenemos",
        vosotros: "ten√©is",
        ellos: "tienen"},
      }
    ];

    let verb = verbList[0]


    document.addEventListener("DOMContentLoaded", function(event) { 
      document.querySelector('h2.verblabel').innerHTML = verb.name;


      for (let i = 0; i < Object.keys(verb.conjugations).length; i++) {
        let conjugation = verb.conjugations[i];
        for (let key in conjugation) {
          let value = conjugation[key];
          let keyName = getKeyByValue(conjugation, value);
          let element = document.querySelector('.' + key + '-conjugate');
          element.innerHTML = value;
        }
      }
    });


        function handleClickPrimary(event) {
          selectedPronoun = event.target.innerHTML.split("...")[0];
          if (selectedConjugation) {
            if (verb.conjugations[selectedPronoun] == selectedConjugation) {
              document.querySelector(".cell.selected").classList.add("correct");
              document.querySelector(".cell.selected").classList.remove("selected");
              event.target.classList.add("correct");
              return;
            }
          }

          const buttons = document.querySelectorAll('.cell');
          highlightOnlyOne(event.target, buttons);
          selectedPronoun = event.target.innerHTML.split('...')[0];
        }

        function handleClickSecondary(event) {
          selectedConjugation = event.target.innerHTML;
          if (selectedPronoun) {
            if (verb.conjugations[selectedPronoun] == selectedConjugation) {
              document.querySelector(".cell.selected").classList.add("correct");
              document.querySelector(".cell.selected").classList.remove("selected");
              event.target.classList.add("correct");
              return;
            }
          }

          const buttons = document.querySelectorAll('.cell');
          highlightOnlyOne(event.target, buttons);
          selectedConjugation = event.target.innerHTML;
        }

        function highlightOnlyOne(target, buttons) {
          // Remove highlight class from all buttons
          buttons.forEach(button => {
              button.classList.remove('selected');
          });

          // Add highlight class to target
          target.classList.add('selected');
        }

        function getKeyByValue(object, value) {
          return Object.keys(object).find(key => object[key] === value);
        }


  </script>
</head>
<body>
  <div id="app">
    <h2>Match the conjugation with the pronoun for...</h2>
    <h2 class="verblabel"></h2>
    <div class="gameContainer">
      <div class="table primary">
        <div class="row">
          <div class="cell pronoun yo" onclick="handleClickPrimary(event)">yo...</div>
          <div class="cell pronoun tu" onclick="handleClickPrimary(event)">tu...</div>
          <div class="cell pronoun el" onclick="handleClickPrimary(event)">el...</div>
        </div>
        <div class="row">
          <div class="cell pronoun nosotros" onclick="handleClickPrimary(event)">nosotros...</div>
          <div class="cell pronoun vosotros" onclick="handleClickPrimary(event)">vosotros...</div>
          <div class="cell pronoun ellos" onclick="handleClickPrimary(event)">ellos...</div>
        </div>
      </div>
      <div>
        <h2><- Click to Match -></h2>
      </div>
      <div class="secondary">
          <script>
            let elementList = []
            for (let i = 0; i < Object.keys(verb.conjugations).length; i++) {
              let conjugation = verb.conjugations[Object.keys(verb.conjugations)[i]];
              let keyName = getKeyByValue(verb.conjugations, conjugation);
              let element = document.querySelector("." + Object.keys(verb.conjugations)[i] + "-conjugate");
              let cellElement = document.createElement('div');
              cellElement.classList.add('cell');
              cellElement.classList.add(keyName + '-conjugate');
              cellElement.classList.add('conjugate');
              cellElement.innerHTML = conjugation;
              cellElement.onclick = function(event) {
                handleClickSecondary(event);
              }
              elementList.push(cellElement);
            }
            const randomizedList = elementList.sort(() => Math.random() - 0.5);
            for (let element in randomizedList) {
              document.querySelector(".secondary").appendChild(randomizedList[element]);
            }
          </script>
      </div>
  </div>
</body>
</html>

